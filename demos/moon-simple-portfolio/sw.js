var __wpo = {"assets":{"main":["/main.js","/style.css","/","/thanks.html","/favicons/android-icon-144x144.png","/favicons/android-icon-192x192.png","/favicons/android-icon-36x36.png","/favicons/android-icon-48x48.png","/favicons/android-icon-72x72.png","/favicons/apple-icon-114x114.png","/favicons/android-icon-96x96.png","/favicons/apple-icon-120x120.png","/favicons/apple-icon-144x144.png","/favicons/apple-icon-152x152.png","/favicons/apple-icon-180x180.png","/favicons/apple-icon-57x57.png","/favicons/apple-icon-60x60.png","/favicons/apple-icon-72x72.png","/favicons/apple-icon-76x76.png","/favicons/apple-icon-precomposed.png","/favicons/apple-icon.png","/favicons/browserconfig.xml","/favicons/favicon-16x16.png","/favicons/demo-to-export.png","/favicons/favicon-32x32.png","/favicons/favicon-96x96.png","/favicons/icon-gravit-design.gvdesign","/favicons/manifest.json","/favicons/ms-icon-144x144.png","/favicons/ms-icon-150x150.png","/favicons/ms-icon-310x310.png","/favicons/ms-icon-70x70.png"],"additional":[],"optional":[]},"externals":[],"hashesMap":{"42fbc33af4df90d280fd092cc882efec43c0762b":"/main.js","1d3d0314a11b94a399a3900037e9912116c57b71":"/style.css","1208f947de8464e62f617b3c48f094879b649b73":"/","80a95deb4e3cac4f7aad73384edd27dc9f451f74":"/thanks.html","e0f93d5930c91e0e27cf68706ec91aa6b85e8e2d":"/favicons/ms-icon-144x144.png","9be6520183732e3fecb691f55ec1e4208c86f6b9":"/favicons/android-icon-192x192.png","6e1740730fb19602042c390273e17f49062b23a4":"/favicons/android-icon-36x36.png","d7824817e28830972b145def200ebc63496bcb43":"/favicons/android-icon-48x48.png","f64d03fec0241213ab0d894af9a5cbb1455f461e":"/favicons/apple-icon-72x72.png","b777533c19d73261751a2ba22ea255126cc8085c":"/favicons/apple-icon-114x114.png","b61e5a8e75c5074a14536f96380c1f81f5d4c5dc":"/favicons/favicon-96x96.png","2dda7cabe9292690b27c4b934944c54075a1a8f1":"/favicons/apple-icon-120x120.png","87e12d9c7db688bb34ba9352769928a0de1ee381":"/favicons/apple-icon-152x152.png","d3cc601783ead6773c67394e9f96f546b41c2ef5":"/favicons/apple-icon-180x180.png","8b97e5f5a0d44ec56326182d3b92a3b13554b0eb":"/favicons/apple-icon-57x57.png","bbb4a7abaa6c906ff7d458ab47d251bd08fb6195":"/favicons/apple-icon-60x60.png","71ca5789289511bf735ee86cc0b8907348ab76b3":"/favicons/apple-icon-76x76.png","b19c17c19d6af50eb8bf4fb7d2e79bd067b5aa00":"/favicons/apple-icon.png","a103e282040b5592aaf7343a8e44d857d83628ea":"/favicons/browserconfig.xml","d3258869296a091dc2edb081bf140f37bff53cf3":"/favicons/favicon-16x16.png","58fb4e724987f7fd90483f46547c14b237f19ab7":"/favicons/demo-to-export.png","e90baacb4b6ff67a33d372c8813187e52133edee":"/favicons/favicon-32x32.png","7cb6902d4f2f060847f35d567c383acfe8840cf6":"/favicons/icon-gravit-design.gvdesign","8be91af2a72f320a6c495182965d9e008c4c3ab6":"/favicons/manifest.json","cf0570200329fa6a0ab22043e02ed78a1f77b343":"/favicons/ms-icon-150x150.png","04d48bf29ebd66c56045248c7e751f00c64c2eb4":"/favicons/ms-icon-310x310.png","8945e718f8e729330ebe1ea2d7c8505ca1db86a6":"/favicons/ms-icon-70x70.png"},"strategy":"changed","responseStrategy":"cache-first","version":"2017-7-29 22:12:53","name":"webpack-offline","pluginVersion":"4.8.3","relativePaths":false};

!function(n){function g(I){if(c[I])return c[I].exports;var e=c[I]={i:I,l:!1,exports:{}};return n[I].call(e.exports,e,e.exports,g),e.l=!0,e.exports}var c={};g.m=n,g.c=c,g.i=function(n){return n},g.d=function(n,c,I){g.o(n,c)||Object.defineProperty(n,c,{configurable:!1,enumerable:!0,get:I})},g.n=function(n){var c=n&&n.__esModule?function(){return n.default}:function(){return n};return g.d(c,"a",c),c},g.o=function(n,g){return Object.prototype.hasOwnProperty.call(n,g)},g.p="/",g(g.s=1)}([function(module,exports){eval("//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiIwLmpzIiwic291cmNlc0NvbnRlbnQiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///0\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\n(function () {\n  var waitUntil = ExtendableEvent.prototype.waitUntil;\n  var respondWith = FetchEvent.prototype.respondWith;\n  var promisesMap = new WeakMap();\n\n  ExtendableEvent.prototype.waitUntil = function (promise) {\n    var extendableEvent = this;\n    var promises = promisesMap.get(extendableEvent);\n\n    if (promises) {\n      promises.push(Promise.resolve(promise));\n      return;\n    }\n\n    promises = [Promise.resolve(promise)];\n    promisesMap.set(extendableEvent, promises);\n\n    // call original method\n    return waitUntil.call(extendableEvent, Promise.resolve().then(function processPromises() {\n      var len = promises.length;\n\n      // wait for all to settle\n      return Promise.all(promises.map(function (p) {\n        return p[\"catch\"](function () {});\n      })).then(function () {\n        // have new items been added? If so, wait again\n        if (promises.length != len) return processPromises();\n        // we're done!\n        promisesMap[\"delete\"](extendableEvent);\n        // reject if one of the promises rejected\n        return Promise.all(promises);\n      });\n    }));\n  };\n\n  FetchEvent.prototype.respondWith = function (promise) {\n    this.waitUntil(promise);\n    return respondWith.call(this, promise);\n  };\n})();;\n        'use strict';\n\nif (typeof DEBUG === 'undefined') {\n  var DEBUG = false;\n}\n\nfunction WebpackServiceWorker(params, helpers) {\n  var loaders = helpers.loaders;\n  var cacheMaps = helpers.cacheMaps;\n\n  var strategy = params.strategy;\n  var responseStrategy = params.responseStrategy;\n\n  var assets = params.assets;\n  var loadersMap = params.loaders || {};\n\n  var hashesMap = params.hashesMap;\n  var externals = params.externals;\n\n  // Not used yet\n  // const alwaysRevalidate = params.alwaysRevalidate;\n  // const ignoreSearch = params.ignoreSearch;\n  // const preferOnline = params.preferOnline;\n\n  var CACHE_PREFIX = params.name;\n  var CACHE_TAG = params.version;\n  var CACHE_NAME = CACHE_PREFIX + ':' + CACHE_TAG;\n\n  var STORED_DATA_KEY = '__offline_webpack__data';\n\n  mapAssets();\n\n  var allAssets = [].concat(assets.main, assets.additional, assets.optional);\n  var navigateFallbackURL = params.navigateFallbackURL;\n  var navigateFallbackForRedirects = params.navigateFallbackForRedirects;\n\n  self.addEventListener('install', function (event) {\n    console.log('[SW]:', 'Install event');\n\n    var installing = undefined;\n\n    if (strategy === 'changed') {\n      installing = cacheChanged('main');\n    } else {\n      installing = cacheAssets('main');\n    }\n\n    event.waitUntil(installing);\n  });\n\n  self.addEventListener('activate', function (event) {\n    console.log('[SW]:', 'Activate event');\n\n    var activation = cacheAdditional();\n\n    // Delete all assets which name starts with CACHE_PREFIX and\n    // is not current cache (CACHE_NAME)\n    activation = activation.then(storeCacheData);\n    activation = activation.then(deleteObsolete);\n    activation = activation.then(function () {\n      if (self.clients && self.clients.claim) {\n        return self.clients.claim();\n      }\n    });\n\n    event.waitUntil(activation);\n  });\n\n  function cacheAdditional() {\n    if (!assets.additional.length) {\n      return Promise.resolve();\n    }\n\n    if (DEBUG) {\n      console.log('[SW]:', 'Caching additional');\n    }\n\n    var operation = undefined;\n\n    if (strategy === 'changed') {\n      operation = cacheChanged('additional');\n    } else {\n      operation = cacheAssets('additional');\n    }\n\n    // Ignore fail of `additional` cache section\n    return operation['catch'](function (e) {\n      console.error('[SW]:', 'Cache section `additional` failed to load');\n    });\n  }\n\n  function cacheAssets(section) {\n    var batch = assets[section];\n\n    return caches.open(CACHE_NAME).then(function (cache) {\n      return addAllNormalized(cache, batch, {\n        bust: params.version,\n        request: params.prefetchRequest\n      });\n    }).then(function () {\n      logGroup('Cached assets: ' + section, batch);\n    })['catch'](function (e) {\n      console.error(e);\n      throw e;\n    });\n  }\n\n  function cacheChanged(section) {\n    return getLastCache().then(function (args) {\n      if (!args) {\n        return cacheAssets(section);\n      }\n\n      var lastCache = args[0];\n      var lastKeys = args[1];\n      var lastData = args[2];\n\n      var lastMap = lastData.hashmap;\n      var lastVersion = lastData.version;\n\n      if (!lastData.hashmap || lastVersion === params.version) {\n        return cacheAssets(section);\n      }\n\n      var lastHashedAssets = Object.keys(lastMap).map(function (hash) {\n        return lastMap[hash];\n      });\n\n      var lastUrls = lastKeys.map(function (req) {\n        var url = new URL(req.url);\n        url.search = '';\n        url.hash = '';\n\n        return url.toString();\n      });\n\n      var sectionAssets = assets[section];\n      var moved = [];\n      var changed = sectionAssets.filter(function (url) {\n        if (lastUrls.indexOf(url) === -1 || lastHashedAssets.indexOf(url) === -1) {\n          return true;\n        }\n\n        return false;\n      });\n\n      Object.keys(hashesMap).forEach(function (hash) {\n        var asset = hashesMap[hash];\n\n        // Return if not in sectionAssets or in changed or moved array\n        if (sectionAssets.indexOf(asset) === -1 || changed.indexOf(asset) !== -1 || moved.indexOf(asset) !== -1) return;\n\n        var lastAsset = lastMap[hash];\n\n        if (lastAsset && lastUrls.indexOf(lastAsset) !== -1) {\n          moved.push([lastAsset, asset]);\n        } else {\n          changed.push(asset);\n        }\n      });\n\n      logGroup('Changed assets: ' + section, changed);\n      logGroup('Moved assets: ' + section, moved);\n\n      var movedResponses = Promise.all(moved.map(function (pair) {\n        return lastCache.match(pair[0]).then(function (response) {\n          return [pair[1], response];\n        });\n      }));\n\n      return caches.open(CACHE_NAME).then(function (cache) {\n        var move = movedResponses.then(function (responses) {\n          return Promise.all(responses.map(function (pair) {\n            return cache.put(pair[0], pair[1]);\n          }));\n        });\n\n        return Promise.all([move, addAllNormalized(cache, changed, {\n          bust: params.version,\n          request: params.prefetchRequest\n        })]);\n      });\n    });\n  }\n\n  function deleteObsolete() {\n    return caches.keys().then(function (keys) {\n      var all = keys.map(function (key) {\n        if (key.indexOf(CACHE_PREFIX) !== 0 || key.indexOf(CACHE_NAME) === 0) return;\n\n        console.log('[SW]:', 'Delete cache:', key);\n        return caches['delete'](key);\n      });\n\n      return Promise.all(all);\n    });\n  }\n\n  function getLastCache() {\n    return caches.keys().then(function (keys) {\n      var index = keys.length;\n      var key = undefined;\n\n      while (index--) {\n        key = keys[index];\n\n        if (key.indexOf(CACHE_PREFIX) === 0) {\n          break;\n        }\n      }\n\n      if (!key) return;\n\n      var cache = undefined;\n\n      return caches.open(key).then(function (_cache) {\n        cache = _cache;\n        return _cache.match(new URL(STORED_DATA_KEY, location).toString());\n      }).then(function (response) {\n        if (!response) return;\n\n        return Promise.all([cache, cache.keys(), response.json()]);\n      });\n    });\n  }\n\n  function storeCacheData() {\n    return caches.open(CACHE_NAME).then(function (cache) {\n      var data = new Response(JSON.stringify({\n        version: params.version,\n        hashmap: hashesMap\n      }));\n\n      return cache.put(new URL(STORED_DATA_KEY, location).toString(), data);\n    });\n  }\n\n  self.addEventListener('fetch', function (event) {\n    var url = new URL(event.request.url);\n    url.hash = '';\n\n    var urlString = url.toString();\n\n    // Not external, so search part of the URL should be stripped,\n    // if it's external URL, the search part should be kept\n    if (externals.indexOf(urlString) === -1) {\n      url.search = '';\n      urlString = url.toString();\n    }\n\n    // Handle only GET requests\n    var isGET = event.request.method === 'GET';\n    var assetMatches = allAssets.indexOf(urlString) !== -1;\n    var cacheUrl = urlString;\n\n    if (!assetMatches) {\n      var cacheRewrite = matchCacheMap(event.request);\n\n      if (cacheRewrite) {\n        cacheUrl = cacheRewrite;\n        assetMatches = true;\n      }\n    }\n\n    if (!assetMatches && isGET) {\n      // If isn't a cached asset and is a navigation request,\n      // fallback to navigateFallbackURL if available\n      if (navigateFallbackURL && isNavigateRequest(event.request)) {\n        event.respondWith(handleNavigateFallback(fetch(event.request)));\n\n        return;\n      }\n    }\n\n    if (!assetMatches || !isGET) {\n      // Fix for https://twitter.com/wanderview/status/696819243262873600\n      if (url.origin !== location.origin && navigator.userAgent.indexOf('Firefox/44.') !== -1) {\n        event.respondWith(fetch(event.request));\n      }\n\n      return;\n    }\n\n    // Logic of caching / fetching is here\n    // * urlString -- url to match from the CACHE_NAME\n    // * event.request -- original Request to perform fetch() if necessary\n    var resource = undefined;\n\n    if (responseStrategy === 'network-first') {\n      resource = networkFirstResponse(event, urlString, cacheUrl);\n    }\n    // 'cache-first'\n    // (responseStrategy has been validated before)\n    else {\n        resource = cacheFirstResponse(event, urlString, cacheUrl);\n      }\n\n    if (navigateFallbackURL && isNavigateRequest(event.request)) {\n      resource = handleNavigateFallback(resource);\n    }\n\n    event.respondWith(resource);\n  });\n\n  self.addEventListener('message', function (e) {\n    var data = e.data;\n    if (!data) return;\n\n    switch (data.action) {\n      case 'skipWaiting':\n        {\n          if (self.skipWaiting) self.skipWaiting();\n        }break;\n    }\n  });\n\n  function cacheFirstResponse(event, urlString, cacheUrl) {\n    return cachesMatch(cacheUrl, CACHE_NAME).then(function (response) {\n      if (response) {\n        if (DEBUG) {\n          console.log('[SW]:', 'URL [' + cacheUrl + '](' + urlString + ') from cache');\n        }\n\n        return response;\n      }\n\n      // Load and cache known assets\n      var fetching = fetch(event.request).then(function (response) {\n        if (!response.ok) {\n          if (DEBUG) {\n            console.log('[SW]:', 'URL [' + urlString + '] wrong response: [' + response.status + '] ' + response.type);\n          }\n\n          return response;\n        }\n\n        if (DEBUG) {\n          console.log('[SW]:', 'URL [' + urlString + '] from network');\n        }\n\n        if (cacheUrl === urlString) {\n          (function () {\n            var responseClone = response.clone();\n            var storing = caches.open(CACHE_NAME).then(function (cache) {\n              return cache.put(urlString, responseClone);\n            }).then(function () {\n              console.log('[SW]:', 'Cache asset: ' + urlString);\n            });\n\n            event.waitUntil(storing);\n          })();\n        }\n\n        return response;\n      });\n\n      return fetching;\n    });\n  }\n\n  function networkFirstResponse(event, urlString, cacheUrl) {\n    return fetch(event.request).then(function (response) {\n      if (response.ok) {\n        if (DEBUG) {\n          console.log('[SW]:', 'URL [' + urlString + '] from network');\n        }\n\n        return response;\n      }\n\n      // Throw to reach the code in the catch below\n      throw new Error('Response is not ok');\n    })\n    // This needs to be in a catch() and not just in the then() above\n    // cause if your network is down, the fetch() will throw\n    ['catch'](function () {\n      if (DEBUG) {\n        console.log('[SW]:', 'URL [' + urlString + '] from cache if possible');\n      }\n\n      return cachesMatch(cacheUrl, CACHE_NAME);\n    });\n  }\n\n  function handleNavigateFallback(fetching) {\n    return fetching['catch'](function () {}).then(function (response) {\n      var isOk = response && response.ok;\n      var isRedirect = response && response.type === 'opaqueredirect';\n\n      if (isOk || isRedirect && !navigateFallbackForRedirects) {\n        return response;\n      }\n\n      if (DEBUG) {\n        console.log('[SW]:', 'Loading navigation fallback [' + navigateFallbackURL + '] from cache');\n      }\n\n      return cachesMatch(navigateFallbackURL, CACHE_NAME);\n    });\n  }\n\n  function mapAssets() {\n    Object.keys(assets).forEach(function (key) {\n      assets[key] = assets[key].map(function (path) {\n        var url = new URL(path, location);\n\n        url.hash = '';\n\n        if (externals.indexOf(path) === -1) {\n          url.search = '';\n        }\n\n        return url.toString();\n      });\n    });\n\n    Object.keys(loadersMap).forEach(function (key) {\n      loadersMap[key] = loadersMap[key].map(function (path) {\n        var url = new URL(path, location);\n\n        url.hash = '';\n\n        if (externals.indexOf(path) === -1) {\n          url.search = '';\n        }\n\n        return url.toString();\n      });\n    });\n\n    hashesMap = Object.keys(hashesMap).reduce(function (result, hash) {\n      var url = new URL(hashesMap[hash], location);\n      url.search = '';\n      url.hash = '';\n\n      result[hash] = url.toString();\n      return result;\n    }, {});\n\n    externals = externals.map(function (path) {\n      var url = new URL(path, location);\n      url.hash = '';\n\n      return url.toString();\n    });\n  }\n\n  function addAllNormalized(cache, requests, options) {\n    var allowLoaders = options.allowLoaders !== false;\n    var bustValue = options && options.bust;\n    var requestInit = options.request || {\n      credentials: 'omit',\n      mode: 'cors'\n    };\n\n    return Promise.all(requests.map(function (request) {\n      if (bustValue) {\n        request = applyCacheBust(request, bustValue);\n      }\n\n      return fetch(request, requestInit).then(fixRedirectedResponse);\n    })).then(function (responses) {\n      if (responses.some(function (response) {\n        return !response.ok;\n      })) {\n        return Promise.reject(new Error('Wrong response status'));\n      }\n\n      var extracted = [];\n      var addAll = responses.map(function (response, i) {\n        if (allowLoaders) {\n          extracted.push(extractAssetsWithLoaders(requests[i], response));\n        }\n\n        return cache.put(requests[i], response);\n      });\n\n      if (extracted.length) {\n        (function () {\n          var newOptions = copyObject(options);\n          newOptions.allowLoaders = false;\n\n          var waitAll = addAll;\n\n          addAll = Promise.all(extracted).then(function (all) {\n            var extractedRequests = [].concat.apply([], all);\n\n            if (requests.length) {\n              waitAll = waitAll.concat(addAllNormalized(cache, extractedRequests, newOptions));\n            }\n\n            return Promise.all(waitAll);\n          });\n        })();\n      } else {\n        addAll = Promise.all(addAll);\n      }\n\n      return addAll;\n    });\n  }\n\n  function extractAssetsWithLoaders(request, response) {\n    var all = Object.keys(loadersMap).map(function (key) {\n      var loader = loadersMap[key];\n\n      if (loader.indexOf(request) !== -1 && loaders[key]) {\n        return loaders[key](response.clone());\n      }\n    }).filter(function (a) {\n      return !!a;\n    });\n\n    return Promise.all(all).then(function (all) {\n      return [].concat.apply([], all);\n    });\n  }\n\n  function matchCacheMap(request) {\n    var urlString = request.url;\n    var url = new URL(urlString);\n\n    var requestType = undefined;\n\n    if (request.mode === 'navigate') {\n      requestType = 'navigate';\n    } else if (url.origin === location.origin) {\n      requestType = 'same-origin';\n    } else {\n      requestType = 'cross-origin';\n    }\n\n    for (var i = 0; i < cacheMaps.length; i++) {\n      var map = cacheMaps[i];\n\n      if (!map) continue;\n      if (map.requestTypes && map.requestTypes.indexOf(requestType) === -1) {\n        continue;\n      }\n\n      var newString = undefined;\n\n      if (typeof map.match === 'function') {\n        newString = map.match(url, request);\n      } else {\n        newString = urlString.replace(map.match, map.to);\n      }\n\n      if (newString && newString !== urlString) {\n        return newString;\n      }\n    }\n  }\n}\n\nfunction cachesMatch(request, cacheName) {\n  return caches.match(request, {\n    cacheName: cacheName\n  }).then(function (response) {\n    if (isNotRedirectedResponse()) {\n      return response;\n    }\n\n    // Fix already cached redirected responses\n    return fixRedirectedResponse(response).then(function (fixedResponse) {\n      return caches.open(cacheName).then(function (cache) {\n        return cache.put(request, fixedResponse);\n      }).then(function () {\n        return fixedResponse;\n      });\n    });\n  })\n  // Return void if error happened (cache not found)\n  ['catch'](function () {});\n}\n\nfunction applyCacheBust(asset, key) {\n  var hasQuery = asset.indexOf('?') !== -1;\n  return asset + (hasQuery ? '&' : '?') + '__uncache=' + encodeURIComponent(key);\n}\n\nfunction getClientsURLs() {\n  if (!self.clients) {\n    return Promise.resolve([]);\n  }\n\n  return self.clients.matchAll({\n    includeUncontrolled: true\n  }).then(function (clients) {\n    if (!clients.length) return [];\n\n    var result = [];\n\n    clients.forEach(function (client) {\n      var url = new URL(client.url);\n      url.search = '';\n      url.hash = '';\n      var urlString = url.toString();\n\n      if (!result.length || result.indexOf(urlString) === -1) {\n        result.push(urlString);\n      }\n    });\n\n    return result;\n  });\n}\n\nfunction isNavigateRequest(request) {\n  return request.mode === 'navigate' || request.headers.get('Upgrade-Insecure-Requests') || (request.headers.get('Accept') || '').indexOf('text/html') !== -1;\n}\n\nfunction isNotRedirectedResponse(response) {\n  return !response || !response.redirected || !response.ok || response.type === 'opaqueredirect';\n}\n\n// Based on https://github.com/GoogleChrome/sw-precache/pull/241/files#diff-3ee9060dc7a312c6a822cac63a8c630bR85\nfunction fixRedirectedResponse(response) {\n  if (isNotRedirectedResponse(response)) {\n    return Promise.resolve(response);\n  }\n\n  var body = 'body' in response ? Promise.resolve(response.body) : response.blob();\n\n  return body.then(function (data) {\n    return new Response(data, {\n      headers: response.headers,\n      status: response.status\n    });\n  });\n}\n\nfunction copyObject(original) {\n  return Object.keys(original).reduce(function (result, key) {\n    result[key] = original[key];\n    return result;\n  }, {});\n}\n\nfunction logGroup(title, assets) {\n  console.groupCollapsed('[SW]:', title);\n\n  assets.forEach(function (asset) {\n    console.log('Asset:', asset);\n  });\n\n  console.groupEnd();\n}\n        WebpackServiceWorker(__wpo, {\nloaders: {},\ncacheMaps: [],\n});\n        module.exports = __webpack_require__(0)\n      //# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9+L29mZmxpbmUtcGx1Z2luL3RwbHMvZW1wdHktZW50cnkuanM/ZmQ1ZiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHdDQUF3QztBQUN4QyxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQSxHQUFHOztBQUVIO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLE9BQU87O0FBRVA7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxPQUFPOztBQUVQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLE9BQU87O0FBRVA7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLE9BQU87O0FBRVA7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTzs7QUFFUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWCxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1AsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxPQUFPOztBQUVQO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQOztBQUVBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTzs7QUFFUDtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxhQUFhOztBQUViO0FBQ0EsV0FBVztBQUNYOztBQUVBO0FBQ0EsT0FBTzs7QUFFUDtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBLDJDQUEyQztBQUMzQztBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsT0FBTztBQUNQLEtBQUs7O0FBRUw7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLE9BQU87QUFDUCxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxLQUFLLElBQUk7O0FBRVQ7QUFDQTtBQUNBOztBQUVBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsT0FBTzs7QUFFUDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFdBQVc7QUFDWCxTQUFTO0FBQ1QsT0FBTztBQUNQO0FBQ0E7O0FBRUE7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBLG1CQUFtQixzQkFBc0I7QUFDekM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQSwwQkFBMEI7QUFDMUI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUcsSUFBSTtBQUNQOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0EsQ0FBQztBQUNEIiwiZmlsZSI6IjEuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuKGZ1bmN0aW9uICgpIHtcbiAgdmFyIHdhaXRVbnRpbCA9IEV4dGVuZGFibGVFdmVudC5wcm90b3R5cGUud2FpdFVudGlsO1xuICB2YXIgcmVzcG9uZFdpdGggPSBGZXRjaEV2ZW50LnByb3RvdHlwZS5yZXNwb25kV2l0aDtcbiAgdmFyIHByb21pc2VzTWFwID0gbmV3IFdlYWtNYXAoKTtcblxuICBFeHRlbmRhYmxlRXZlbnQucHJvdG90eXBlLndhaXRVbnRpbCA9IGZ1bmN0aW9uIChwcm9taXNlKSB7XG4gICAgdmFyIGV4dGVuZGFibGVFdmVudCA9IHRoaXM7XG4gICAgdmFyIHByb21pc2VzID0gcHJvbWlzZXNNYXAuZ2V0KGV4dGVuZGFibGVFdmVudCk7XG5cbiAgICBpZiAocHJvbWlzZXMpIHtcbiAgICAgIHByb21pc2VzLnB1c2goUHJvbWlzZS5yZXNvbHZlKHByb21pc2UpKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBwcm9taXNlcyA9IFtQcm9taXNlLnJlc29sdmUocHJvbWlzZSldO1xuICAgIHByb21pc2VzTWFwLnNldChleHRlbmRhYmxlRXZlbnQsIHByb21pc2VzKTtcblxuICAgIC8vIGNhbGwgb3JpZ2luYWwgbWV0aG9kXG4gICAgcmV0dXJuIHdhaXRVbnRpbC5jYWxsKGV4dGVuZGFibGVFdmVudCwgUHJvbWlzZS5yZXNvbHZlKCkudGhlbihmdW5jdGlvbiBwcm9jZXNzUHJvbWlzZXMoKSB7XG4gICAgICB2YXIgbGVuID0gcHJvbWlzZXMubGVuZ3RoO1xuXG4gICAgICAvLyB3YWl0IGZvciBhbGwgdG8gc2V0dGxlXG4gICAgICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMubWFwKGZ1bmN0aW9uIChwKSB7XG4gICAgICAgIHJldHVybiBwW1wiY2F0Y2hcIl0oZnVuY3Rpb24gKCkge30pO1xuICAgICAgfSkpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBoYXZlIG5ldyBpdGVtcyBiZWVuIGFkZGVkPyBJZiBzbywgd2FpdCBhZ2FpblxuICAgICAgICBpZiAocHJvbWlzZXMubGVuZ3RoICE9IGxlbikgcmV0dXJuIHByb2Nlc3NQcm9taXNlcygpO1xuICAgICAgICAvLyB3ZSdyZSBkb25lIVxuICAgICAgICBwcm9taXNlc01hcFtcImRlbGV0ZVwiXShleHRlbmRhYmxlRXZlbnQpO1xuICAgICAgICAvLyByZWplY3QgaWYgb25lIG9mIHRoZSBwcm9taXNlcyByZWplY3RlZFxuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpO1xuICAgICAgfSk7XG4gICAgfSkpO1xuICB9O1xuXG4gIEZldGNoRXZlbnQucHJvdG90eXBlLnJlc3BvbmRXaXRoID0gZnVuY3Rpb24gKHByb21pc2UpIHtcbiAgICB0aGlzLndhaXRVbnRpbChwcm9taXNlKTtcbiAgICByZXR1cm4gcmVzcG9uZFdpdGguY2FsbCh0aGlzLCBwcm9taXNlKTtcbiAgfTtcbn0pKCk7O1xuICAgICAgICAndXNlIHN0cmljdCc7XG5cbmlmICh0eXBlb2YgREVCVUcgPT09ICd1bmRlZmluZWQnKSB7XG4gIHZhciBERUJVRyA9IGZhbHNlO1xufVxuXG5mdW5jdGlvbiBXZWJwYWNrU2VydmljZVdvcmtlcihwYXJhbXMsIGhlbHBlcnMpIHtcbiAgdmFyIGxvYWRlcnMgPSBoZWxwZXJzLmxvYWRlcnM7XG4gIHZhciBjYWNoZU1hcHMgPSBoZWxwZXJzLmNhY2hlTWFwcztcblxuICB2YXIgc3RyYXRlZ3kgPSBwYXJhbXMuc3RyYXRlZ3k7XG4gIHZhciByZXNwb25zZVN0cmF0ZWd5ID0gcGFyYW1zLnJlc3BvbnNlU3RyYXRlZ3k7XG5cbiAgdmFyIGFzc2V0cyA9IHBhcmFtcy5hc3NldHM7XG4gIHZhciBsb2FkZXJzTWFwID0gcGFyYW1zLmxvYWRlcnMgfHwge307XG5cbiAgdmFyIGhhc2hlc01hcCA9IHBhcmFtcy5oYXNoZXNNYXA7XG4gIHZhciBleHRlcm5hbHMgPSBwYXJhbXMuZXh0ZXJuYWxzO1xuXG4gIC8vIE5vdCB1c2VkIHlldFxuICAvLyBjb25zdCBhbHdheXNSZXZhbGlkYXRlID0gcGFyYW1zLmFsd2F5c1JldmFsaWRhdGU7XG4gIC8vIGNvbnN0IGlnbm9yZVNlYXJjaCA9IHBhcmFtcy5pZ25vcmVTZWFyY2g7XG4gIC8vIGNvbnN0IHByZWZlck9ubGluZSA9IHBhcmFtcy5wcmVmZXJPbmxpbmU7XG5cbiAgdmFyIENBQ0hFX1BSRUZJWCA9IHBhcmFtcy5uYW1lO1xuICB2YXIgQ0FDSEVfVEFHID0gcGFyYW1zLnZlcnNpb247XG4gIHZhciBDQUNIRV9OQU1FID0gQ0FDSEVfUFJFRklYICsgJzonICsgQ0FDSEVfVEFHO1xuXG4gIHZhciBTVE9SRURfREFUQV9LRVkgPSAnX19vZmZsaW5lX3dlYnBhY2tfX2RhdGEnO1xuXG4gIG1hcEFzc2V0cygpO1xuXG4gIHZhciBhbGxBc3NldHMgPSBbXS5jb25jYXQoYXNzZXRzLm1haW4sIGFzc2V0cy5hZGRpdGlvbmFsLCBhc3NldHMub3B0aW9uYWwpO1xuICB2YXIgbmF2aWdhdGVGYWxsYmFja1VSTCA9IHBhcmFtcy5uYXZpZ2F0ZUZhbGxiYWNrVVJMO1xuICB2YXIgbmF2aWdhdGVGYWxsYmFja0ZvclJlZGlyZWN0cyA9IHBhcmFtcy5uYXZpZ2F0ZUZhbGxiYWNrRm9yUmVkaXJlY3RzO1xuXG4gIHNlbGYuYWRkRXZlbnRMaXN0ZW5lcignaW5zdGFsbCcsIGZ1bmN0aW9uIChldmVudCkge1xuICAgIGNvbnNvbGUubG9nKCdbU1ddOicsICdJbnN0YWxsIGV2ZW50Jyk7XG5cbiAgICB2YXIgaW5zdGFsbGluZyA9IHVuZGVmaW5lZDtcblxuICAgIGlmIChzdHJhdGVneSA9PT0gJ2NoYW5nZWQnKSB7XG4gICAgICBpbnN0YWxsaW5nID0gY2FjaGVDaGFuZ2VkKCdtYWluJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGluc3RhbGxpbmcgPSBjYWNoZUFzc2V0cygnbWFpbicpO1xuICAgIH1cblxuICAgIGV2ZW50LndhaXRVbnRpbChpbnN0YWxsaW5nKTtcbiAgfSk7XG5cbiAgc2VsZi5hZGRFdmVudExpc3RlbmVyKCdhY3RpdmF0ZScsIGZ1bmN0aW9uIChldmVudCkge1xuICAgIGNvbnNvbGUubG9nKCdbU1ddOicsICdBY3RpdmF0ZSBldmVudCcpO1xuXG4gICAgdmFyIGFjdGl2YXRpb24gPSBjYWNoZUFkZGl0aW9uYWwoKTtcblxuICAgIC8vIERlbGV0ZSBhbGwgYXNzZXRzIHdoaWNoIG5hbWUgc3RhcnRzIHdpdGggQ0FDSEVfUFJFRklYIGFuZFxuICAgIC8vIGlzIG5vdCBjdXJyZW50IGNhY2hlIChDQUNIRV9OQU1FKVxuICAgIGFjdGl2YXRpb24gPSBhY3RpdmF0aW9uLnRoZW4oc3RvcmVDYWNoZURhdGEpO1xuICAgIGFjdGl2YXRpb24gPSBhY3RpdmF0aW9uLnRoZW4oZGVsZXRlT2Jzb2xldGUpO1xuICAgIGFjdGl2YXRpb24gPSBhY3RpdmF0aW9uLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHNlbGYuY2xpZW50cyAmJiBzZWxmLmNsaWVudHMuY2xhaW0pIHtcbiAgICAgICAgcmV0dXJuIHNlbGYuY2xpZW50cy5jbGFpbSgpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgZXZlbnQud2FpdFVudGlsKGFjdGl2YXRpb24pO1xuICB9KTtcblxuICBmdW5jdGlvbiBjYWNoZUFkZGl0aW9uYWwoKSB7XG4gICAgaWYgKCFhc3NldHMuYWRkaXRpb25hbC5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBpZiAoREVCVUcpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdbU1ddOicsICdDYWNoaW5nIGFkZGl0aW9uYWwnKTtcbiAgICB9XG5cbiAgICB2YXIgb3BlcmF0aW9uID0gdW5kZWZpbmVkO1xuXG4gICAgaWYgKHN0cmF0ZWd5ID09PSAnY2hhbmdlZCcpIHtcbiAgICAgIG9wZXJhdGlvbiA9IGNhY2hlQ2hhbmdlZCgnYWRkaXRpb25hbCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICBvcGVyYXRpb24gPSBjYWNoZUFzc2V0cygnYWRkaXRpb25hbCcpO1xuICAgIH1cblxuICAgIC8vIElnbm9yZSBmYWlsIG9mIGBhZGRpdGlvbmFsYCBjYWNoZSBzZWN0aW9uXG4gICAgcmV0dXJuIG9wZXJhdGlvblsnY2F0Y2gnXShmdW5jdGlvbiAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcignW1NXXTonLCAnQ2FjaGUgc2VjdGlvbiBgYWRkaXRpb25hbGAgZmFpbGVkIHRvIGxvYWQnKTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNhY2hlQXNzZXRzKHNlY3Rpb24pIHtcbiAgICB2YXIgYmF0Y2ggPSBhc3NldHNbc2VjdGlvbl07XG5cbiAgICByZXR1cm4gY2FjaGVzLm9wZW4oQ0FDSEVfTkFNRSkudGhlbihmdW5jdGlvbiAoY2FjaGUpIHtcbiAgICAgIHJldHVybiBhZGRBbGxOb3JtYWxpemVkKGNhY2hlLCBiYXRjaCwge1xuICAgICAgICBidXN0OiBwYXJhbXMudmVyc2lvbixcbiAgICAgICAgcmVxdWVzdDogcGFyYW1zLnByZWZldGNoUmVxdWVzdFxuICAgICAgfSk7XG4gICAgfSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICBsb2dHcm91cCgnQ2FjaGVkIGFzc2V0czogJyArIHNlY3Rpb24sIGJhdGNoKTtcbiAgICB9KVsnY2F0Y2gnXShmdW5jdGlvbiAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcihlKTtcbiAgICAgIHRocm93IGU7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBjYWNoZUNoYW5nZWQoc2VjdGlvbikge1xuICAgIHJldHVybiBnZXRMYXN0Q2FjaGUoKS50aGVuKGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICBpZiAoIWFyZ3MpIHtcbiAgICAgICAgcmV0dXJuIGNhY2hlQXNzZXRzKHNlY3Rpb24pO1xuICAgICAgfVxuXG4gICAgICB2YXIgbGFzdENhY2hlID0gYXJnc1swXTtcbiAgICAgIHZhciBsYXN0S2V5cyA9IGFyZ3NbMV07XG4gICAgICB2YXIgbGFzdERhdGEgPSBhcmdzWzJdO1xuXG4gICAgICB2YXIgbGFzdE1hcCA9IGxhc3REYXRhLmhhc2htYXA7XG4gICAgICB2YXIgbGFzdFZlcnNpb24gPSBsYXN0RGF0YS52ZXJzaW9uO1xuXG4gICAgICBpZiAoIWxhc3REYXRhLmhhc2htYXAgfHwgbGFzdFZlcnNpb24gPT09IHBhcmFtcy52ZXJzaW9uKSB7XG4gICAgICAgIHJldHVybiBjYWNoZUFzc2V0cyhzZWN0aW9uKTtcbiAgICAgIH1cblxuICAgICAgdmFyIGxhc3RIYXNoZWRBc3NldHMgPSBPYmplY3Qua2V5cyhsYXN0TWFwKS5tYXAoZnVuY3Rpb24gKGhhc2gpIHtcbiAgICAgICAgcmV0dXJuIGxhc3RNYXBbaGFzaF07XG4gICAgICB9KTtcblxuICAgICAgdmFyIGxhc3RVcmxzID0gbGFzdEtleXMubWFwKGZ1bmN0aW9uIChyZXEpIHtcbiAgICAgICAgdmFyIHVybCA9IG5ldyBVUkwocmVxLnVybCk7XG4gICAgICAgIHVybC5zZWFyY2ggPSAnJztcbiAgICAgICAgdXJsLmhhc2ggPSAnJztcblxuICAgICAgICByZXR1cm4gdXJsLnRvU3RyaW5nKCk7XG4gICAgICB9KTtcblxuICAgICAgdmFyIHNlY3Rpb25Bc3NldHMgPSBhc3NldHNbc2VjdGlvbl07XG4gICAgICB2YXIgbW92ZWQgPSBbXTtcbiAgICAgIHZhciBjaGFuZ2VkID0gc2VjdGlvbkFzc2V0cy5maWx0ZXIoZnVuY3Rpb24gKHVybCkge1xuICAgICAgICBpZiAobGFzdFVybHMuaW5kZXhPZih1cmwpID09PSAtMSB8fCBsYXN0SGFzaGVkQXNzZXRzLmluZGV4T2YodXJsKSA9PT0gLTEpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH0pO1xuXG4gICAgICBPYmplY3Qua2V5cyhoYXNoZXNNYXApLmZvckVhY2goZnVuY3Rpb24gKGhhc2gpIHtcbiAgICAgICAgdmFyIGFzc2V0ID0gaGFzaGVzTWFwW2hhc2hdO1xuXG4gICAgICAgIC8vIFJldHVybiBpZiBub3QgaW4gc2VjdGlvbkFzc2V0cyBvciBpbiBjaGFuZ2VkIG9yIG1vdmVkIGFycmF5XG4gICAgICAgIGlmIChzZWN0aW9uQXNzZXRzLmluZGV4T2YoYXNzZXQpID09PSAtMSB8fCBjaGFuZ2VkLmluZGV4T2YoYXNzZXQpICE9PSAtMSB8fCBtb3ZlZC5pbmRleE9mKGFzc2V0KSAhPT0gLTEpIHJldHVybjtcblxuICAgICAgICB2YXIgbGFzdEFzc2V0ID0gbGFzdE1hcFtoYXNoXTtcblxuICAgICAgICBpZiAobGFzdEFzc2V0ICYmIGxhc3RVcmxzLmluZGV4T2YobGFzdEFzc2V0KSAhPT0gLTEpIHtcbiAgICAgICAgICBtb3ZlZC5wdXNoKFtsYXN0QXNzZXQsIGFzc2V0XSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2hhbmdlZC5wdXNoKGFzc2V0KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGxvZ0dyb3VwKCdDaGFuZ2VkIGFzc2V0czogJyArIHNlY3Rpb24sIGNoYW5nZWQpO1xuICAgICAgbG9nR3JvdXAoJ01vdmVkIGFzc2V0czogJyArIHNlY3Rpb24sIG1vdmVkKTtcblxuICAgICAgdmFyIG1vdmVkUmVzcG9uc2VzID0gUHJvbWlzZS5hbGwobW92ZWQubWFwKGZ1bmN0aW9uIChwYWlyKSB7XG4gICAgICAgIHJldHVybiBsYXN0Q2FjaGUubWF0Y2gocGFpclswXSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICByZXR1cm4gW3BhaXJbMV0sIHJlc3BvbnNlXTtcbiAgICAgICAgfSk7XG4gICAgICB9KSk7XG5cbiAgICAgIHJldHVybiBjYWNoZXMub3BlbihDQUNIRV9OQU1FKS50aGVuKGZ1bmN0aW9uIChjYWNoZSkge1xuICAgICAgICB2YXIgbW92ZSA9IG1vdmVkUmVzcG9uc2VzLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlcykge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChyZXNwb25zZXMubWFwKGZ1bmN0aW9uIChwYWlyKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FjaGUucHV0KHBhaXJbMF0sIHBhaXJbMV0pO1xuICAgICAgICAgIH0pKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKFttb3ZlLCBhZGRBbGxOb3JtYWxpemVkKGNhY2hlLCBjaGFuZ2VkLCB7XG4gICAgICAgICAgYnVzdDogcGFyYW1zLnZlcnNpb24sXG4gICAgICAgICAgcmVxdWVzdDogcGFyYW1zLnByZWZldGNoUmVxdWVzdFxuICAgICAgICB9KV0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBkZWxldGVPYnNvbGV0ZSgpIHtcbiAgICByZXR1cm4gY2FjaGVzLmtleXMoKS50aGVuKGZ1bmN0aW9uIChrZXlzKSB7XG4gICAgICB2YXIgYWxsID0ga2V5cy5tYXAoZnVuY3Rpb24gKGtleSkge1xuICAgICAgICBpZiAoa2V5LmluZGV4T2YoQ0FDSEVfUFJFRklYKSAhPT0gMCB8fCBrZXkuaW5kZXhPZihDQUNIRV9OQU1FKSA9PT0gMCkgcmV0dXJuO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKCdbU1ddOicsICdEZWxldGUgY2FjaGU6Jywga2V5KTtcbiAgICAgICAgcmV0dXJuIGNhY2hlc1snZGVsZXRlJ10oa2V5KTtcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gUHJvbWlzZS5hbGwoYWxsKTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldExhc3RDYWNoZSgpIHtcbiAgICByZXR1cm4gY2FjaGVzLmtleXMoKS50aGVuKGZ1bmN0aW9uIChrZXlzKSB7XG4gICAgICB2YXIgaW5kZXggPSBrZXlzLmxlbmd0aDtcbiAgICAgIHZhciBrZXkgPSB1bmRlZmluZWQ7XG5cbiAgICAgIHdoaWxlIChpbmRleC0tKSB7XG4gICAgICAgIGtleSA9IGtleXNbaW5kZXhdO1xuXG4gICAgICAgIGlmIChrZXkuaW5kZXhPZihDQUNIRV9QUkVGSVgpID09PSAwKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKCFrZXkpIHJldHVybjtcblxuICAgICAgdmFyIGNhY2hlID0gdW5kZWZpbmVkO1xuXG4gICAgICByZXR1cm4gY2FjaGVzLm9wZW4oa2V5KS50aGVuKGZ1bmN0aW9uIChfY2FjaGUpIHtcbiAgICAgICAgY2FjaGUgPSBfY2FjaGU7XG4gICAgICAgIHJldHVybiBfY2FjaGUubWF0Y2gobmV3IFVSTChTVE9SRURfREFUQV9LRVksIGxvY2F0aW9uKS50b1N0cmluZygpKTtcbiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgIGlmICghcmVzcG9uc2UpIHJldHVybjtcblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoW2NhY2hlLCBjYWNoZS5rZXlzKCksIHJlc3BvbnNlLmpzb24oKV0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBzdG9yZUNhY2hlRGF0YSgpIHtcbiAgICByZXR1cm4gY2FjaGVzLm9wZW4oQ0FDSEVfTkFNRSkudGhlbihmdW5jdGlvbiAoY2FjaGUpIHtcbiAgICAgIHZhciBkYXRhID0gbmV3IFJlc3BvbnNlKEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgdmVyc2lvbjogcGFyYW1zLnZlcnNpb24sXG4gICAgICAgIGhhc2htYXA6IGhhc2hlc01hcFxuICAgICAgfSkpO1xuXG4gICAgICByZXR1cm4gY2FjaGUucHV0KG5ldyBVUkwoU1RPUkVEX0RBVEFfS0VZLCBsb2NhdGlvbikudG9TdHJpbmcoKSwgZGF0YSk7XG4gICAgfSk7XG4gIH1cblxuICBzZWxmLmFkZEV2ZW50TGlzdGVuZXIoJ2ZldGNoJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgdmFyIHVybCA9IG5ldyBVUkwoZXZlbnQucmVxdWVzdC51cmwpO1xuICAgIHVybC5oYXNoID0gJyc7XG5cbiAgICB2YXIgdXJsU3RyaW5nID0gdXJsLnRvU3RyaW5nKCk7XG5cbiAgICAvLyBOb3QgZXh0ZXJuYWwsIHNvIHNlYXJjaCBwYXJ0IG9mIHRoZSBVUkwgc2hvdWxkIGJlIHN0cmlwcGVkLFxuICAgIC8vIGlmIGl0J3MgZXh0ZXJuYWwgVVJMLCB0aGUgc2VhcmNoIHBhcnQgc2hvdWxkIGJlIGtlcHRcbiAgICBpZiAoZXh0ZXJuYWxzLmluZGV4T2YodXJsU3RyaW5nKSA9PT0gLTEpIHtcbiAgICAgIHVybC5zZWFyY2ggPSAnJztcbiAgICAgIHVybFN0cmluZyA9IHVybC50b1N0cmluZygpO1xuICAgIH1cblxuICAgIC8vIEhhbmRsZSBvbmx5IEdFVCByZXF1ZXN0c1xuICAgIHZhciBpc0dFVCA9IGV2ZW50LnJlcXVlc3QubWV0aG9kID09PSAnR0VUJztcbiAgICB2YXIgYXNzZXRNYXRjaGVzID0gYWxsQXNzZXRzLmluZGV4T2YodXJsU3RyaW5nKSAhPT0gLTE7XG4gICAgdmFyIGNhY2hlVXJsID0gdXJsU3RyaW5nO1xuXG4gICAgaWYgKCFhc3NldE1hdGNoZXMpIHtcbiAgICAgIHZhciBjYWNoZVJld3JpdGUgPSBtYXRjaENhY2hlTWFwKGV2ZW50LnJlcXVlc3QpO1xuXG4gICAgICBpZiAoY2FjaGVSZXdyaXRlKSB7XG4gICAgICAgIGNhY2hlVXJsID0gY2FjaGVSZXdyaXRlO1xuICAgICAgICBhc3NldE1hdGNoZXMgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghYXNzZXRNYXRjaGVzICYmIGlzR0VUKSB7XG4gICAgICAvLyBJZiBpc24ndCBhIGNhY2hlZCBhc3NldCBhbmQgaXMgYSBuYXZpZ2F0aW9uIHJlcXVlc3QsXG4gICAgICAvLyBmYWxsYmFjayB0byBuYXZpZ2F0ZUZhbGxiYWNrVVJMIGlmIGF2YWlsYWJsZVxuICAgICAgaWYgKG5hdmlnYXRlRmFsbGJhY2tVUkwgJiYgaXNOYXZpZ2F0ZVJlcXVlc3QoZXZlbnQucmVxdWVzdCkpIHtcbiAgICAgICAgZXZlbnQucmVzcG9uZFdpdGgoaGFuZGxlTmF2aWdhdGVGYWxsYmFjayhmZXRjaChldmVudC5yZXF1ZXN0KSkpO1xuXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIWFzc2V0TWF0Y2hlcyB8fCAhaXNHRVQpIHtcbiAgICAgIC8vIEZpeCBmb3IgaHR0cHM6Ly90d2l0dGVyLmNvbS93YW5kZXJ2aWV3L3N0YXR1cy82OTY4MTkyNDMyNjI4NzM2MDBcbiAgICAgIGlmICh1cmwub3JpZ2luICE9PSBsb2NhdGlvbi5vcmlnaW4gJiYgbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdGaXJlZm94LzQ0LicpICE9PSAtMSkge1xuICAgICAgICBldmVudC5yZXNwb25kV2l0aChmZXRjaChldmVudC5yZXF1ZXN0KSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBMb2dpYyBvZiBjYWNoaW5nIC8gZmV0Y2hpbmcgaXMgaGVyZVxuICAgIC8vICogdXJsU3RyaW5nIC0tIHVybCB0byBtYXRjaCBmcm9tIHRoZSBDQUNIRV9OQU1FXG4gICAgLy8gKiBldmVudC5yZXF1ZXN0IC0tIG9yaWdpbmFsIFJlcXVlc3QgdG8gcGVyZm9ybSBmZXRjaCgpIGlmIG5lY2Vzc2FyeVxuICAgIHZhciByZXNvdXJjZSA9IHVuZGVmaW5lZDtcblxuICAgIGlmIChyZXNwb25zZVN0cmF0ZWd5ID09PSAnbmV0d29yay1maXJzdCcpIHtcbiAgICAgIHJlc291cmNlID0gbmV0d29ya0ZpcnN0UmVzcG9uc2UoZXZlbnQsIHVybFN0cmluZywgY2FjaGVVcmwpO1xuICAgIH1cbiAgICAvLyAnY2FjaGUtZmlyc3QnXG4gICAgLy8gKHJlc3BvbnNlU3RyYXRlZ3kgaGFzIGJlZW4gdmFsaWRhdGVkIGJlZm9yZSlcbiAgICBlbHNlIHtcbiAgICAgICAgcmVzb3VyY2UgPSBjYWNoZUZpcnN0UmVzcG9uc2UoZXZlbnQsIHVybFN0cmluZywgY2FjaGVVcmwpO1xuICAgICAgfVxuXG4gICAgaWYgKG5hdmlnYXRlRmFsbGJhY2tVUkwgJiYgaXNOYXZpZ2F0ZVJlcXVlc3QoZXZlbnQucmVxdWVzdCkpIHtcbiAgICAgIHJlc291cmNlID0gaGFuZGxlTmF2aWdhdGVGYWxsYmFjayhyZXNvdXJjZSk7XG4gICAgfVxuXG4gICAgZXZlbnQucmVzcG9uZFdpdGgocmVzb3VyY2UpO1xuICB9KTtcblxuICBzZWxmLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBmdW5jdGlvbiAoZSkge1xuICAgIHZhciBkYXRhID0gZS5kYXRhO1xuICAgIGlmICghZGF0YSkgcmV0dXJuO1xuXG4gICAgc3dpdGNoIChkYXRhLmFjdGlvbikge1xuICAgICAgY2FzZSAnc2tpcFdhaXRpbmcnOlxuICAgICAgICB7XG4gICAgICAgICAgaWYgKHNlbGYuc2tpcFdhaXRpbmcpIHNlbGYuc2tpcFdhaXRpbmcoKTtcbiAgICAgICAgfWJyZWFrO1xuICAgIH1cbiAgfSk7XG5cbiAgZnVuY3Rpb24gY2FjaGVGaXJzdFJlc3BvbnNlKGV2ZW50LCB1cmxTdHJpbmcsIGNhY2hlVXJsKSB7XG4gICAgcmV0dXJuIGNhY2hlc01hdGNoKGNhY2hlVXJsLCBDQUNIRV9OQU1FKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgaWYgKHJlc3BvbnNlKSB7XG4gICAgICAgIGlmIChERUJVRykge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdbU1ddOicsICdVUkwgWycgKyBjYWNoZVVybCArICddKCcgKyB1cmxTdHJpbmcgKyAnKSBmcm9tIGNhY2hlJyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgICB9XG5cbiAgICAgIC8vIExvYWQgYW5kIGNhY2hlIGtub3duIGFzc2V0c1xuICAgICAgdmFyIGZldGNoaW5nID0gZmV0Y2goZXZlbnQucmVxdWVzdCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgIGlmIChERUJVRykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tTV106JywgJ1VSTCBbJyArIHVybFN0cmluZyArICddIHdyb25nIHJlc3BvbnNlOiBbJyArIHJlc3BvbnNlLnN0YXR1cyArICddICcgKyByZXNwb25zZS50eXBlKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoREVCVUcpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnW1NXXTonLCAnVVJMIFsnICsgdXJsU3RyaW5nICsgJ10gZnJvbSBuZXR3b3JrJyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY2FjaGVVcmwgPT09IHVybFN0cmluZykge1xuICAgICAgICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcmVzcG9uc2VDbG9uZSA9IHJlc3BvbnNlLmNsb25lKCk7XG4gICAgICAgICAgICB2YXIgc3RvcmluZyA9IGNhY2hlcy5vcGVuKENBQ0hFX05BTUUpLnRoZW4oZnVuY3Rpb24gKGNhY2hlKSB7XG4gICAgICAgICAgICAgIHJldHVybiBjYWNoZS5wdXQodXJsU3RyaW5nLCByZXNwb25zZUNsb25lKTtcbiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW1NXXTonLCAnQ2FjaGUgYXNzZXQ6ICcgKyB1cmxTdHJpbmcpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGV2ZW50LndhaXRVbnRpbChzdG9yaW5nKTtcbiAgICAgICAgICB9KSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBmZXRjaGluZztcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG5ldHdvcmtGaXJzdFJlc3BvbnNlKGV2ZW50LCB1cmxTdHJpbmcsIGNhY2hlVXJsKSB7XG4gICAgcmV0dXJuIGZldGNoKGV2ZW50LnJlcXVlc3QpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgICAgaWYgKERFQlVHKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ1tTV106JywgJ1VSTCBbJyArIHVybFN0cmluZyArICddIGZyb20gbmV0d29yaycpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgICAgfVxuXG4gICAgICAvLyBUaHJvdyB0byByZWFjaCB0aGUgY29kZSBpbiB0aGUgY2F0Y2ggYmVsb3dcbiAgICAgIHRocm93IG5ldyBFcnJvcignUmVzcG9uc2UgaXMgbm90IG9rJyk7XG4gICAgfSlcbiAgICAvLyBUaGlzIG5lZWRzIHRvIGJlIGluIGEgY2F0Y2goKSBhbmQgbm90IGp1c3QgaW4gdGhlIHRoZW4oKSBhYm92ZVxuICAgIC8vIGNhdXNlIGlmIHlvdXIgbmV0d29yayBpcyBkb3duLCB0aGUgZmV0Y2goKSB3aWxsIHRocm93XG4gICAgWydjYXRjaCddKGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChERUJVRykge1xuICAgICAgICBjb25zb2xlLmxvZygnW1NXXTonLCAnVVJMIFsnICsgdXJsU3RyaW5nICsgJ10gZnJvbSBjYWNoZSBpZiBwb3NzaWJsZScpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gY2FjaGVzTWF0Y2goY2FjaGVVcmwsIENBQ0hFX05BTUUpO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlTmF2aWdhdGVGYWxsYmFjayhmZXRjaGluZykge1xuICAgIHJldHVybiBmZXRjaGluZ1snY2F0Y2gnXShmdW5jdGlvbiAoKSB7fSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgIHZhciBpc09rID0gcmVzcG9uc2UgJiYgcmVzcG9uc2Uub2s7XG4gICAgICB2YXIgaXNSZWRpcmVjdCA9IHJlc3BvbnNlICYmIHJlc3BvbnNlLnR5cGUgPT09ICdvcGFxdWVyZWRpcmVjdCc7XG5cbiAgICAgIGlmIChpc09rIHx8IGlzUmVkaXJlY3QgJiYgIW5hdmlnYXRlRmFsbGJhY2tGb3JSZWRpcmVjdHMpIHtcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgICAgfVxuXG4gICAgICBpZiAoREVCVUcpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1tTV106JywgJ0xvYWRpbmcgbmF2aWdhdGlvbiBmYWxsYmFjayBbJyArIG5hdmlnYXRlRmFsbGJhY2tVUkwgKyAnXSBmcm9tIGNhY2hlJyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBjYWNoZXNNYXRjaChuYXZpZ2F0ZUZhbGxiYWNrVVJMLCBDQUNIRV9OQU1FKTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG1hcEFzc2V0cygpIHtcbiAgICBPYmplY3Qua2V5cyhhc3NldHMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgYXNzZXRzW2tleV0gPSBhc3NldHNba2V5XS5tYXAoZnVuY3Rpb24gKHBhdGgpIHtcbiAgICAgICAgdmFyIHVybCA9IG5ldyBVUkwocGF0aCwgbG9jYXRpb24pO1xuXG4gICAgICAgIHVybC5oYXNoID0gJyc7XG5cbiAgICAgICAgaWYgKGV4dGVybmFscy5pbmRleE9mKHBhdGgpID09PSAtMSkge1xuICAgICAgICAgIHVybC5zZWFyY2ggPSAnJztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB1cmwudG9TdHJpbmcoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgT2JqZWN0LmtleXMobG9hZGVyc01hcCkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICBsb2FkZXJzTWFwW2tleV0gPSBsb2FkZXJzTWFwW2tleV0ubWFwKGZ1bmN0aW9uIChwYXRoKSB7XG4gICAgICAgIHZhciB1cmwgPSBuZXcgVVJMKHBhdGgsIGxvY2F0aW9uKTtcblxuICAgICAgICB1cmwuaGFzaCA9ICcnO1xuXG4gICAgICAgIGlmIChleHRlcm5hbHMuaW5kZXhPZihwYXRoKSA9PT0gLTEpIHtcbiAgICAgICAgICB1cmwuc2VhcmNoID0gJyc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdXJsLnRvU3RyaW5nKCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGhhc2hlc01hcCA9IE9iamVjdC5rZXlzKGhhc2hlc01hcCkucmVkdWNlKGZ1bmN0aW9uIChyZXN1bHQsIGhhc2gpIHtcbiAgICAgIHZhciB1cmwgPSBuZXcgVVJMKGhhc2hlc01hcFtoYXNoXSwgbG9jYXRpb24pO1xuICAgICAgdXJsLnNlYXJjaCA9ICcnO1xuICAgICAgdXJsLmhhc2ggPSAnJztcblxuICAgICAgcmVzdWx0W2hhc2hdID0gdXJsLnRvU3RyaW5nKCk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0sIHt9KTtcblxuICAgIGV4dGVybmFscyA9IGV4dGVybmFscy5tYXAoZnVuY3Rpb24gKHBhdGgpIHtcbiAgICAgIHZhciB1cmwgPSBuZXcgVVJMKHBhdGgsIGxvY2F0aW9uKTtcbiAgICAgIHVybC5oYXNoID0gJyc7XG5cbiAgICAgIHJldHVybiB1cmwudG9TdHJpbmcoKTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFkZEFsbE5vcm1hbGl6ZWQoY2FjaGUsIHJlcXVlc3RzLCBvcHRpb25zKSB7XG4gICAgdmFyIGFsbG93TG9hZGVycyA9IG9wdGlvbnMuYWxsb3dMb2FkZXJzICE9PSBmYWxzZTtcbiAgICB2YXIgYnVzdFZhbHVlID0gb3B0aW9ucyAmJiBvcHRpb25zLmJ1c3Q7XG4gICAgdmFyIHJlcXVlc3RJbml0ID0gb3B0aW9ucy5yZXF1ZXN0IHx8IHtcbiAgICAgIGNyZWRlbnRpYWxzOiAnb21pdCcsXG4gICAgICBtb2RlOiAnY29ycydcbiAgICB9O1xuXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKHJlcXVlc3RzLm1hcChmdW5jdGlvbiAocmVxdWVzdCkge1xuICAgICAgaWYgKGJ1c3RWYWx1ZSkge1xuICAgICAgICByZXF1ZXN0ID0gYXBwbHlDYWNoZUJ1c3QocmVxdWVzdCwgYnVzdFZhbHVlKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGZldGNoKHJlcXVlc3QsIHJlcXVlc3RJbml0KS50aGVuKGZpeFJlZGlyZWN0ZWRSZXNwb25zZSk7XG4gICAgfSkpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlcykge1xuICAgICAgaWYgKHJlc3BvbnNlcy5zb21lKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICByZXR1cm4gIXJlc3BvbnNlLm9rO1xuICAgICAgfSkpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcignV3JvbmcgcmVzcG9uc2Ugc3RhdHVzJykpO1xuICAgICAgfVxuXG4gICAgICB2YXIgZXh0cmFjdGVkID0gW107XG4gICAgICB2YXIgYWRkQWxsID0gcmVzcG9uc2VzLm1hcChmdW5jdGlvbiAocmVzcG9uc2UsIGkpIHtcbiAgICAgICAgaWYgKGFsbG93TG9hZGVycykge1xuICAgICAgICAgIGV4dHJhY3RlZC5wdXNoKGV4dHJhY3RBc3NldHNXaXRoTG9hZGVycyhyZXF1ZXN0c1tpXSwgcmVzcG9uc2UpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjYWNoZS5wdXQocmVxdWVzdHNbaV0sIHJlc3BvbnNlKTtcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoZXh0cmFjdGVkLmxlbmd0aCkge1xuICAgICAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZhciBuZXdPcHRpb25zID0gY29weU9iamVjdChvcHRpb25zKTtcbiAgICAgICAgICBuZXdPcHRpb25zLmFsbG93TG9hZGVycyA9IGZhbHNlO1xuXG4gICAgICAgICAgdmFyIHdhaXRBbGwgPSBhZGRBbGw7XG5cbiAgICAgICAgICBhZGRBbGwgPSBQcm9taXNlLmFsbChleHRyYWN0ZWQpLnRoZW4oZnVuY3Rpb24gKGFsbCkge1xuICAgICAgICAgICAgdmFyIGV4dHJhY3RlZFJlcXVlc3RzID0gW10uY29uY2F0LmFwcGx5KFtdLCBhbGwpO1xuXG4gICAgICAgICAgICBpZiAocmVxdWVzdHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIHdhaXRBbGwgPSB3YWl0QWxsLmNvbmNhdChhZGRBbGxOb3JtYWxpemVkKGNhY2hlLCBleHRyYWN0ZWRSZXF1ZXN0cywgbmV3T3B0aW9ucykpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwod2FpdEFsbCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhZGRBbGwgPSBQcm9taXNlLmFsbChhZGRBbGwpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gYWRkQWxsO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gZXh0cmFjdEFzc2V0c1dpdGhMb2FkZXJzKHJlcXVlc3QsIHJlc3BvbnNlKSB7XG4gICAgdmFyIGFsbCA9IE9iamVjdC5rZXlzKGxvYWRlcnNNYXApLm1hcChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICB2YXIgbG9hZGVyID0gbG9hZGVyc01hcFtrZXldO1xuXG4gICAgICBpZiAobG9hZGVyLmluZGV4T2YocmVxdWVzdCkgIT09IC0xICYmIGxvYWRlcnNba2V5XSkge1xuICAgICAgICByZXR1cm4gbG9hZGVyc1trZXldKHJlc3BvbnNlLmNsb25lKCkpO1xuICAgICAgfVxuICAgIH0pLmZpbHRlcihmdW5jdGlvbiAoYSkge1xuICAgICAgcmV0dXJuICEhYTtcbiAgICB9KTtcblxuICAgIHJldHVybiBQcm9taXNlLmFsbChhbGwpLnRoZW4oZnVuY3Rpb24gKGFsbCkge1xuICAgICAgcmV0dXJuIFtdLmNvbmNhdC5hcHBseShbXSwgYWxsKTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG1hdGNoQ2FjaGVNYXAocmVxdWVzdCkge1xuICAgIHZhciB1cmxTdHJpbmcgPSByZXF1ZXN0LnVybDtcbiAgICB2YXIgdXJsID0gbmV3IFVSTCh1cmxTdHJpbmcpO1xuXG4gICAgdmFyIHJlcXVlc3RUeXBlID0gdW5kZWZpbmVkO1xuXG4gICAgaWYgKHJlcXVlc3QubW9kZSA9PT0gJ25hdmlnYXRlJykge1xuICAgICAgcmVxdWVzdFR5cGUgPSAnbmF2aWdhdGUnO1xuICAgIH0gZWxzZSBpZiAodXJsLm9yaWdpbiA9PT0gbG9jYXRpb24ub3JpZ2luKSB7XG4gICAgICByZXF1ZXN0VHlwZSA9ICdzYW1lLW9yaWdpbic7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlcXVlc3RUeXBlID0gJ2Nyb3NzLW9yaWdpbic7XG4gICAgfVxuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjYWNoZU1hcHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBtYXAgPSBjYWNoZU1hcHNbaV07XG5cbiAgICAgIGlmICghbWFwKSBjb250aW51ZTtcbiAgICAgIGlmIChtYXAucmVxdWVzdFR5cGVzICYmIG1hcC5yZXF1ZXN0VHlwZXMuaW5kZXhPZihyZXF1ZXN0VHlwZSkgPT09IC0xKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICB2YXIgbmV3U3RyaW5nID0gdW5kZWZpbmVkO1xuXG4gICAgICBpZiAodHlwZW9mIG1hcC5tYXRjaCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBuZXdTdHJpbmcgPSBtYXAubWF0Y2godXJsLCByZXF1ZXN0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5ld1N0cmluZyA9IHVybFN0cmluZy5yZXBsYWNlKG1hcC5tYXRjaCwgbWFwLnRvKTtcbiAgICAgIH1cblxuICAgICAgaWYgKG5ld1N0cmluZyAmJiBuZXdTdHJpbmcgIT09IHVybFN0cmluZykge1xuICAgICAgICByZXR1cm4gbmV3U3RyaW5nO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBjYWNoZXNNYXRjaChyZXF1ZXN0LCBjYWNoZU5hbWUpIHtcbiAgcmV0dXJuIGNhY2hlcy5tYXRjaChyZXF1ZXN0LCB7XG4gICAgY2FjaGVOYW1lOiBjYWNoZU5hbWVcbiAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICBpZiAoaXNOb3RSZWRpcmVjdGVkUmVzcG9uc2UoKSkge1xuICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgIH1cblxuICAgIC8vIEZpeCBhbHJlYWR5IGNhY2hlZCByZWRpcmVjdGVkIHJlc3BvbnNlc1xuICAgIHJldHVybiBmaXhSZWRpcmVjdGVkUmVzcG9uc2UocmVzcG9uc2UpLnRoZW4oZnVuY3Rpb24gKGZpeGVkUmVzcG9uc2UpIHtcbiAgICAgIHJldHVybiBjYWNoZXMub3BlbihjYWNoZU5hbWUpLnRoZW4oZnVuY3Rpb24gKGNhY2hlKSB7XG4gICAgICAgIHJldHVybiBjYWNoZS5wdXQocmVxdWVzdCwgZml4ZWRSZXNwb25zZSk7XG4gICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGZpeGVkUmVzcG9uc2U7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSlcbiAgLy8gUmV0dXJuIHZvaWQgaWYgZXJyb3IgaGFwcGVuZWQgKGNhY2hlIG5vdCBmb3VuZClcbiAgWydjYXRjaCddKGZ1bmN0aW9uICgpIHt9KTtcbn1cblxuZnVuY3Rpb24gYXBwbHlDYWNoZUJ1c3QoYXNzZXQsIGtleSkge1xuICB2YXIgaGFzUXVlcnkgPSBhc3NldC5pbmRleE9mKCc/JykgIT09IC0xO1xuICByZXR1cm4gYXNzZXQgKyAoaGFzUXVlcnkgPyAnJicgOiAnPycpICsgJ19fdW5jYWNoZT0nICsgZW5jb2RlVVJJQ29tcG9uZW50KGtleSk7XG59XG5cbmZ1bmN0aW9uIGdldENsaWVudHNVUkxzKCkge1xuICBpZiAoIXNlbGYuY2xpZW50cykge1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoW10pO1xuICB9XG5cbiAgcmV0dXJuIHNlbGYuY2xpZW50cy5tYXRjaEFsbCh7XG4gICAgaW5jbHVkZVVuY29udHJvbGxlZDogdHJ1ZVxuICB9KS50aGVuKGZ1bmN0aW9uIChjbGllbnRzKSB7XG4gICAgaWYgKCFjbGllbnRzLmxlbmd0aCkgcmV0dXJuIFtdO1xuXG4gICAgdmFyIHJlc3VsdCA9IFtdO1xuXG4gICAgY2xpZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChjbGllbnQpIHtcbiAgICAgIHZhciB1cmwgPSBuZXcgVVJMKGNsaWVudC51cmwpO1xuICAgICAgdXJsLnNlYXJjaCA9ICcnO1xuICAgICAgdXJsLmhhc2ggPSAnJztcbiAgICAgIHZhciB1cmxTdHJpbmcgPSB1cmwudG9TdHJpbmcoKTtcblxuICAgICAgaWYgKCFyZXN1bHQubGVuZ3RoIHx8IHJlc3VsdC5pbmRleE9mKHVybFN0cmluZykgPT09IC0xKSB7XG4gICAgICAgIHJlc3VsdC5wdXNoKHVybFN0cmluZyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9KTtcbn1cblxuZnVuY3Rpb24gaXNOYXZpZ2F0ZVJlcXVlc3QocmVxdWVzdCkge1xuICByZXR1cm4gcmVxdWVzdC5tb2RlID09PSAnbmF2aWdhdGUnIHx8IHJlcXVlc3QuaGVhZGVycy5nZXQoJ1VwZ3JhZGUtSW5zZWN1cmUtUmVxdWVzdHMnKSB8fCAocmVxdWVzdC5oZWFkZXJzLmdldCgnQWNjZXB0JykgfHwgJycpLmluZGV4T2YoJ3RleHQvaHRtbCcpICE9PSAtMTtcbn1cblxuZnVuY3Rpb24gaXNOb3RSZWRpcmVjdGVkUmVzcG9uc2UocmVzcG9uc2UpIHtcbiAgcmV0dXJuICFyZXNwb25zZSB8fCAhcmVzcG9uc2UucmVkaXJlY3RlZCB8fCAhcmVzcG9uc2Uub2sgfHwgcmVzcG9uc2UudHlwZSA9PT0gJ29wYXF1ZXJlZGlyZWN0Jztcbn1cblxuLy8gQmFzZWQgb24gaHR0cHM6Ly9naXRodWIuY29tL0dvb2dsZUNocm9tZS9zdy1wcmVjYWNoZS9wdWxsLzI0MS9maWxlcyNkaWZmLTNlZTkwNjBkYzdhMzEyYzZhODIyY2FjNjNhOGM2MzBiUjg1XG5mdW5jdGlvbiBmaXhSZWRpcmVjdGVkUmVzcG9uc2UocmVzcG9uc2UpIHtcbiAgaWYgKGlzTm90UmVkaXJlY3RlZFJlc3BvbnNlKHJlc3BvbnNlKSkge1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzcG9uc2UpO1xuICB9XG5cbiAgdmFyIGJvZHkgPSAnYm9keScgaW4gcmVzcG9uc2UgPyBQcm9taXNlLnJlc29sdmUocmVzcG9uc2UuYm9keSkgOiByZXNwb25zZS5ibG9iKCk7XG5cbiAgcmV0dXJuIGJvZHkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgIHJldHVybiBuZXcgUmVzcG9uc2UoZGF0YSwge1xuICAgICAgaGVhZGVyczogcmVzcG9uc2UuaGVhZGVycyxcbiAgICAgIHN0YXR1czogcmVzcG9uc2Uuc3RhdHVzXG4gICAgfSk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBjb3B5T2JqZWN0KG9yaWdpbmFsKSB7XG4gIHJldHVybiBPYmplY3Qua2V5cyhvcmlnaW5hbCkucmVkdWNlKGZ1bmN0aW9uIChyZXN1bHQsIGtleSkge1xuICAgIHJlc3VsdFtrZXldID0gb3JpZ2luYWxba2V5XTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9LCB7fSk7XG59XG5cbmZ1bmN0aW9uIGxvZ0dyb3VwKHRpdGxlLCBhc3NldHMpIHtcbiAgY29uc29sZS5ncm91cENvbGxhcHNlZCgnW1NXXTonLCB0aXRsZSk7XG5cbiAgYXNzZXRzLmZvckVhY2goZnVuY3Rpb24gKGFzc2V0KSB7XG4gICAgY29uc29sZS5sb2coJ0Fzc2V0OicsIGFzc2V0KTtcbiAgfSk7XG5cbiAgY29uc29sZS5ncm91cEVuZCgpO1xufVxuICAgICAgICBXZWJwYWNrU2VydmljZVdvcmtlcihfX3dwbywge1xubG9hZGVyczoge30sXG5jYWNoZU1hcHM6IFtdLFxufSk7XG4gICAgICAgIG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4vZW1wdHktZW50cnkuanNcIilcbiAgICAgIFxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9vZmZsaW5lLXBsdWdpbi9saWIvbWlzYy9zdy1sb2FkZXIuanM/anNvbj0lN0IlMjJkYXRhX3Zhcl9uYW1lJTIyJTNBJTIyX193cG8lMjIlMkMlMjJsb2FkZXJzJTIyJTNBJTVCJTVEJTJDJTIyY2FjaGVNYXBzJTIyJTNBJTVCJTVEJTdEIS4vfi9vZmZsaW5lLXBsdWdpbi90cGxzL2VtcHR5LWVudHJ5LmpzXG4vLyBtb2R1bGUgaWQgPSAxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///1\n")}]);